
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Python: merger simulations &#8212; Competition Policy and Regulation 1.0 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python: innovation" href="../Innovation/Innovation.html" />
    <link rel="prev" title="Python: price discrimination" href="../pricediscrimination/pricediscrimination.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="python-merger-simulations">
<h1>Python: merger simulations<a class="headerlink" href="#python-merger-simulations" title="Permalink to this headline">¶</a></h1>
<p>In this notebook we introduce a simple model to do merger simulations.
The analysis here is based on <a class="reference external" href="https://escholarship.org/uc/item/2sq9s8c8">Epstein and Rubinfeld
(2001)</a>.</p>
<p>The advantage of this approach is that the model can be calibrated with
relatively little information. In particular, we need to know</p>
<ul class="simple">
<li><p>the market shares of the firms in the relevant market,</p></li>
<li><p>elasticity of market demand,</p></li>
<li><p>own price elasticity for one firm and</p></li>
<li><p>efficiency gains (claimed by firms).</p></li>
</ul>
<p>Once, we know these things, we can simulate the market outcome before
and after the merger. If we do not know one or more parameters, we can
do sensitivity analysis: simply let the parameter run over a vector of
values.</p>
<div class="section" id="what-is-the-use-of-merger-simulation">
<h2>what is the use of merger simulation?<a class="headerlink" href="#what-is-the-use-of-merger-simulation" title="Permalink to this headline">¶</a></h2>
<p>Merger simulation is not a crystal ball! Economists cannot predict the
future. By applying a model to the data that we have, we can think about
the problem (effects of the merger, in this case) in a more structured
way. In particular, we can think about the merger in a way that others
can replicate.</p>
<p>However, every model makes assumptions and if these assumptions do not
apply, the outcome of the model will be incorrect. In other words, the
predictions of the model need to be handled with care.</p>
<p>The model that we use here, makes the following assumptions:</p>
<ul class="simple">
<li><ol class="upperalpha simple" start="16">
<li><p>Proportionality: if a firm raises its price, it loses market
share; this lost market share is allocated to the other firms in
the industry proportionally to these firms’ market shares</p></li>
</ol>
</li>
<li><ol class="upperalpha simple" start="8">
<li><p>Homogeneity: if all firms in the market raise their price by the
same percentage, market shares are unaffected</p></li>
</ol>
</li>
<li><ol class="upperalpha simple">
<li><p>Adding-up: market shares of all firms (brands) in the market add
up to 1.</p></li>
</ol>
</li>
</ul>
<p>Although these assumptions are not unreasonable, they are not “innocent”
either.</p>
<p>First, we import some libraries that we will use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">optimize</span><span class="p">,</span><span class="n">arange</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">array</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">log</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
</pre></div>
</div>
</div>
<div class="section" id="demand">
<h2>demand<a class="headerlink" href="#demand" title="Permalink to this headline">¶</a></h2>
<p>In this notebook we assume that there are 3 firms in the market, named
“firm_1, firm_2, firm_3”. If you use this notebook for a real case,
make sure you call the firms by their name, like “microsoft, google,
facebook” etc. This makes the code more readable than working with firms
1,2,3 and forcing the reader at each step to remember that firm 1 was
supposed to be microsoft.</p>
<p>The market share of firm <span class="math notranslate nohighlight">\(i\)</span> is defined as
<span class="math notranslate nohighlight">\(s_i = \frac{p_i q_i}{P Q}\)</span>, where <span class="math notranslate nohighlight">\(p_i\)</span> denotes <span class="math notranslate nohighlight">\(i\)</span>’s
price, <span class="math notranslate nohighlight">\(q_i\)</span> its quantity, <span class="math notranslate nohighlight">\(Q\)</span> total output on the market
and <span class="math notranslate nohighlight">\(P\)</span> the aggregate industry price index. We assume that this
price index is given by <span class="math notranslate nohighlight">\(\ln(P)=\sum_{i=1}^3 s_i \ln(p_i)\)</span>.</p>
<p>Firm <span class="math notranslate nohighlight">\(i\)</span>’s demand in this model is written in terms of its market
share:</p>
<div class="math notranslate nohighlight">
\[(D) \hspace{5mm} s_i = a_i + b_{ii} \ln(p_i) + b_{ij} \ln(p_j) + b_{ik} \ln(p_k)\]</div>
</div>
<div class="section" id="calibration">
<h2>calibration<a class="headerlink" href="#calibration" title="Permalink to this headline">¶</a></h2>
<p>Although this demand structure is a bit unusual, it has the following
useful property:</p>
<ul class="simple">
<li><p>if we know</p>
<ul>
<li><p>market demand elasticity
<span class="math notranslate nohighlight">\(\varepsilon = \frac{d \ln(Q)}{d \ln (P)}\)</span></p></li>
<li><p>one firm’s own price elasticity
<span class="math notranslate nohighlight">\(\varepsilon_{ii} = \frac{d \ln(q_i)}{d \ln (p_i)}\)</span></p></li>
<li><p>market shares <span class="math notranslate nohighlight">\(s_i \geq 0\)</span> for <span class="math notranslate nohighlight">\(i=1,...,n\)</span> with
<span class="math notranslate nohighlight">\(\sum_{i=1}^n s_i =1\)</span></p></li>
</ul>
</li>
<li><p>if we are willing to assume (P), (H) and (A)</p></li>
<li><p>then we know all coefficients <span class="math notranslate nohighlight">\(b_{ij}\)</span> and demand elasticities
<span class="math notranslate nohighlight">\(\varepsilon_{ij}\)</span></p></li>
</ul>
<p>See the paper for a proof.</p>
<p>One way to find firm <span class="math notranslate nohighlight">\(i\)</span>’s own price elasticity is to estimate
<span class="math notranslate nohighlight">\(i\)</span>’s price cost margin, <span class="math notranslate nohighlight">\(\mu_i\)</span>. Since firms set their
price (cost margin) satisfying <span class="math notranslate nohighlight">\(\mu_i = -1/\varepsilon_{ii}\)</span>, we
know <span class="math notranslate nohighlight">\(\varepsilon_{ii}\)</span> if we know the price cost margin.</p>
<p>If you do not know a parameter very well, then define an interval for it
and do the merger simulation for each value in the interval. This will
give you a good idea of how sensitive the simulation is for the value of
this parameter.</p>
</div>
<div class="section" id="illustration">
<h2>illustration<a class="headerlink" href="#illustration" title="Permalink to this headline">¶</a></h2>
<p>As an illustration of how a merger simulation works, we will replicate
the example in table 1 on page 895 of Epstein and Rubinfeld (2001).</p>
<p>Don’t worry about this class definition, we use it below to get decent
tables with results in the notebook.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ListTable</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Overridden list class which takes a 2-dimensional list of</span>
<span class="sd">        the form [[1,2,3],[4,5,6]], and renders an HTML Table in</span>
<span class="sd">        IPython Notebook. &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_repr_html_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">html</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;&lt;table&gt;&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;tr&gt;&quot;</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">row</span><span class="p">:</span>
                <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;td&gt;{0}&lt;/td&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">col</span><span class="p">))</span>

            <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;/tr&gt;&quot;</span><span class="p">)</span>
        <span class="n">html</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;&lt;/table&gt;&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
</pre></div>
</div>
<p>We create python dictionaries for firms’ market shares and elasticities.
In this way, we can refer to firm 1’s market share as
<code class="docutils literal notranslate"><span class="pre">market_share['firm1']</span></code>. We check that the market shares are all
between 0 and 1. Further, a firm’s own price elasticity is always larger
(in absolute value) than the demand elasticity. Indeed, when a firm
raises its price by 1%, a consumer can either not buy the product at all
or buy it from another firm.</p>
<p>The equations for the price elasticities are derived in the paper:</p>
<div class="math notranslate nohighlight">
\[\begin{split}(E) \hspace{5mm} e_{ij} = \begin{cases}
-1 + \frac{b_{ii}}{s_i} + s_i*(\varepsilon +1) &amp; \text{ if } i=j \\
\frac{b_{ij}}{s_i} + s_j* (\varepsilon +1) &amp; \text{ otherwise }
\end{cases}\end{split}\]</div>
<p>If you use this file to do your own merger simulation, adjust the values
below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">market_share</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># creates a dictionary with market shares</span>
<span class="n">elasticity</span> <span class="o">=</span> <span class="p">{}</span>   <span class="c1"># dictionaries of firm level own and cross elasticities</span>

<span class="n">firms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm2&#39;</span><span class="p">,</span><span class="s1">&#39;firm3&#39;</span><span class="p">]</span> <span class="c1"># names of the firms in a python list</span>
<span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.3</span>
<span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm3&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">sum</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;firm2&#39;</span><span class="p">,</span><span class="s1">&#39;firm3&#39;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span> <span class="s2">&quot;market share of firm: &quot;</span><span class="o">+</span> <span class="n">firm</span> <span class="o">+</span> <span class="s2">&quot; is given by </span><span class="si">%1.2f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span> <span class="k">print</span> <span class="s2">&quot;something wrong with the market share of the firm: &quot;</span><span class="o">+</span><span class="n">firm</span>

<span class="n">market_elasticity</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span> <span class="c1"># market demand elasticity</span>
<span class="n">elasticity</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">3.0</span> <span class="c1"># own elasticity of firm1</span>

<span class="k">if</span> <span class="n">market_elasticity</span> <span class="o">&lt;</span> <span class="n">elasticity</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]:</span>
    <span class="k">print</span> <span class="s2">&quot;error: a firm&#39;s own elasticity exceeds (in absolute value) the market elasticity&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">market</span> <span class="n">share</span> <span class="n">of</span> <span class="n">firm</span><span class="p">:</span> <span class="n">firm1</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">by</span> <span class="mf">0.20</span>
<span class="n">market</span> <span class="n">share</span> <span class="n">of</span> <span class="n">firm</span><span class="p">:</span> <span class="n">firm2</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">by</span> <span class="mf">0.30</span>
<span class="n">market</span> <span class="n">share</span> <span class="n">of</span> <span class="n">firm</span><span class="p">:</span> <span class="n">firm3</span> <span class="ow">is</span> <span class="n">given</span> <span class="n">by</span> <span class="mf">0.50</span>
</pre></div>
</div>
<p>Now we can calculate the relevant parameters of the demand structure.
See the paper for the derivation of these expressions.</p>
<p>We create a dictionary to store the <span class="math notranslate nohighlight">\(b_{ij}\)</span>-coefficients in
<a class="reference external" href="#demand">demand system</a> (D) above. Using the <span class="math notranslate nohighlight">\(b_{ij}\)</span>’s, we
calculate the firm level (own and cross) elasticities <span class="math notranslate nohighlight">\(e_{ij}\)</span>.
The assumption is that the <span class="math notranslate nohighlight">\(b_{ij}\)</span>-coefficients are exogenous,
i.e. do not change after the merger.</p>
<p>As the merger affects firms’ market shares, it does change the firm
elasticities.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">b</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># dictionary of b-coefficients of demand system (D) above</span>
<span class="n">b</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">elasticity</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">market_elasticity</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span>

<span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="n">b</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">firm</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]))</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span>

<span class="k">for</span> <span class="n">one_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">one_firm</span> <span class="o">==</span> <span class="n">other_firm</span><span class="p">:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">one_firm</span><span class="p">]</span><span class="o">=</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]))</span><span class="o">/</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">]))</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm1&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">b</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span> <span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">market_share</span><span class="p">[</span><span class="n">other_firm</span><span class="p">])</span><span class="o">*</span><span class="n">b</span><span class="p">[</span><span class="n">other_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span>

<span class="k">for</span> <span class="n">one_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">one_firm</span> <span class="o">==</span> <span class="n">other_firm</span><span class="p">:</span>
            <span class="n">elasticity</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">one_firm</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">one_firm</span><span class="p">]</span><span class="o">/</span><span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]</span><span class="o">+</span><span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">market_elasticity</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">elasticity</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span><span class="o">/</span><span class="n">market_share</span><span class="p">[</span><span class="n">one_firm</span><span class="p">]</span><span class="o">+</span><span class="n">market_share</span><span class="p">[</span><span class="n">other_firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">market_elasticity</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="n">table</span> <span class="o">=</span> <span class="n">ListTable</span><span class="p">()</span>
<span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;b-coeff.&#39;</span><span class="p">,</span> <span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm2&#39;</span><span class="p">,</span><span class="s1">&#39;firm3&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">one_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">one_firm</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">b</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">])</span>
    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;table of b coefficients:&quot;</span>
<span class="n">table</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="n">of</span> <span class="n">b</span> <span class="n">coefficients</span><span class="p">:</span>
</pre></div>
</div>
<table><tr><td>b-coeff.</td><td>firm1</td><td>firm2</td><td>firm3</td></tr><tr><td>firm1</td><td>-0.400</td><td>0.150</td><td>0.250</td></tr><tr><td>firm2</td><td>0.150</td><td>-0.525</td><td>0.375</td></tr><tr><td>firm3</td><td>0.250</td><td>0.375</td><td>-0.625</td></tr></table><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="o">=</span> <span class="n">ListTable</span><span class="p">()</span>
<span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;elast.&#39;</span><span class="p">,</span> <span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm2&#39;</span><span class="p">,</span><span class="s1">&#39;firm3&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">one_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="n">row</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">one_firm</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
        <span class="n">row</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">elasticity</span><span class="p">[</span><span class="n">one_firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">])</span>
    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="k">print</span> <span class="s2">&quot;table of elasticities:&quot;</span>
<span class="n">table</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="n">of</span> <span class="n">elasticities</span><span class="p">:</span>
</pre></div>
</div>
<table><tr><td>elast.</td><td>firm1</td><td>firm2</td><td>firm3</td></tr><tr><td>firm1</td><td>-3.000</td><td>0.750</td><td>1.250</td></tr><tr><td>firm2</td><td>0.500</td><td>-2.750</td><td>1.250</td></tr><tr><td>firm3</td><td>0.500</td><td>0.750</td><td>-2.250</td></tr></table><p>A profit maximizing firm <span class="math notranslate nohighlight">\(i\)</span> sets its margin equal to
<span class="math notranslate nohighlight">\(\mu_i = -1/e_{ii}\)</span>. This can be derived as follows. A firm
chooses its price level <span class="math notranslate nohighlight">\(p_i\)</span> to maximize profits:</p>
<div class="math notranslate nohighlight">
\[\pi_i = p_i q_i(p_i,p_{-i}) - c_i(q_i(p_i,p_{-i}))\]</div>
<p>First order condition can be written as</p>
<div class="math notranslate nohighlight">
\[q_i + (p_i - c_q) \frac{\partial q_i}{\partial p_i} = 0\]</div>
<p>which can be written as</p>
<div class="math notranslate nohighlight">
\[\mu_i = \frac{p_i - c_q}{p_i} = \frac{dp_i}{dq_i} \frac{q_i}{p_i} = \frac{-1}{e_{ii}}\]</div>
<p>Hence we can calculate the margin for each firm as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">margin</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
    <span class="n">margin</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1.0</span><span class="o">/</span><span class="n">elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">firm</span><span class="p">]</span>
</pre></div>
</div>
<p>The paper shows that the ex post merger outcome in terms of market
share, <span class="math notranslate nohighlight">\(s_j^p\)</span>, price cost margin, <span class="math notranslate nohighlight">\(\mu_j^p\)</span>, and price
change <span class="math notranslate nohighlight">\(\delta_j = \frac{p_j^p - p_j}{p_j}\)</span> (9 variables with 3
firms) satisfies the following 9 equations:</p>
<p>where the efficiency gain is defined as</p>
<div class="math notranslate nohighlight">
\[\gamma_i = \frac{c_i^p-c_i}{c_i}\]</div>
<p>the percentage change in <span class="math notranslate nohighlight">\(i\)</span>’s costs <span class="math notranslate nohighlight">\(c_i\)</span> due to the
merger.</p>
<p>In addition we have the elasticity equations (E) above with post-merger
market shares, denoted <span class="math notranslate nohighlight">\(s_j^p\)</span>.</p>
<p>Details are in the paper, we give a sketch of the proof of the equations
above. The equation for <span class="math notranslate nohighlight">\(s_i^p\)</span> follows from writing the (D)
equations for both <span class="math notranslate nohighlight">\(s_i\)</span> –as above– and for <span class="math notranslate nohighlight">\(s_i^p\)</span>. Then
take the difference of these equations and note that
<span class="math notranslate nohighlight">\(1+\delta_i=p^p_i/p_i\)</span> and
<span class="math notranslate nohighlight">\(\ln(p_i^p)-\ln(p_i)=\ln(1+\delta_i)\)</span>.</p>
<p>For the non merging firm we have <span class="math notranslate nohighlight">\(\mu_3 = -1/e_{33}^p\)</span> as before.
Now, consider the first order condition for <span class="math notranslate nohighlight">\(p_j\)</span> for the merged
firm (consisting of <span class="math notranslate nohighlight">\(j\)</span> and <span class="math notranslate nohighlight">\(k\)</span>):</p>
<div class="math notranslate nohighlight">
\[\frac{\partial q_j}{\partial p_j} (p_j - c_j) + q_j + \frac{\partial q_k}{\partial p_j} (p_k - c_k)\]</div>
<p>which can be rewritten as</p>
<div class="math notranslate nohighlight">
\[s_j^p =  -\varepsilon_{jj}^p s_j^p \mu_j^p -\varepsilon_{kj}^p s_k^p \mu_k^p\]</div>
<p>Finally, the expression for <span class="math notranslate nohighlight">\(\mu_i^p\)</span> follows from the definitions
of <span class="math notranslate nohighlight">\(\gamma_i,\delta_i\)</span> and <span class="math notranslate nohighlight">\(\mu_i\)</span>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">merging_firms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;firm1&#39;</span><span class="p">,</span><span class="s1">&#39;firm2&#39;</span><span class="p">]</span>                      <span class="c1"># list of the merging firms</span>
<span class="n">nonmerging_firms</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">firms</span><span class="p">)</span><span class="o">-</span><span class="nb">set</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">))</span> <span class="c1"># list of non-merging firms</span>
<span class="n">efficiency_gains</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># dictionary with efficiency gains --due to the merger-- for the firms</span>
<span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">merging_firms</span><span class="p">:</span>
    <span class="n">efficiency_gains</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">nonmerging_firms</span><span class="p">:</span>
    <span class="n">efficiency_gains</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.0</span>
</pre></div>
</div>
<p>We create dictionaries for post merger market shares (<span class="math notranslate nohighlight">\(s_i^p\)</span>),
elasticities (<span class="math notranslate nohighlight">\(e_{ij}^p\)</span>), margins (<span class="math notranslate nohighlight">\(\mu_i^p\)</span>) and price
changes (<span class="math notranslate nohighlight">\(\delta_i\)</span>). Then we create a vector function with all
the equations above. We look for the values of
<span class="math notranslate nohighlight">\(s_i^p,e_{ij}^p,\mu_i^p,\delta_i\)</span> such that this vector function
equals zero (all equations are satisfied).</p>
<p>We form a list of equations and append it with new equations. For a
given guess of the values <span class="math notranslate nohighlight">\(s_i^p,e_{ij}^p,\mu_i^p,\delta_i\)</span>
<code class="docutils literal notranslate"><span class="pre">equations</span></code> returns the extent to which the equations are satisfied.
If <code class="docutils literal notranslate"><span class="pre">equations</span></code>=0, all equations are satisfied and we find the post
merger equilibrium.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">post_marketshare</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">post_elasticity</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">post_margin</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">price_change</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span> <span class="nf">vector_function</span><span class="p">(</span><span class="n">post_marketshare</span><span class="p">,</span><span class="n">post_elasticity</span><span class="p">,</span><span class="n">post_margin</span><span class="p">,</span><span class="n">price_change</span><span class="p">):</span>
    <span class="n">equations</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">firms</span><span class="p">):</span>
        <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">market_share</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">+</span><span class="nb">sum</span><span class="p">([</span><span class="n">b</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span><span class="o">*</span><span class="n">log</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">price_change</span><span class="p">[</span><span class="n">other_firm</span><span class="p">])</span> <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">])))</span>
        <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_margin</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">efficiency_gains</span><span class="p">[</span><span class="n">firm</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="mi">1</span><span class="o">+</span><span class="n">price_change</span><span class="p">[</span><span class="n">firm</span><span class="p">])</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">margin</span><span class="p">[</span><span class="n">firm</span><span class="p">])))</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nonmerging_firms</span><span class="p">):</span>
        <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_margin</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">/</span><span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">firm</span><span class="p">])</span>
        <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">firm</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">firm</span><span class="p">]</span><span class="o">/</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">+</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">market_elasticity</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
        <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">+</span><span class="nb">sum</span><span class="p">(</span><span class="n">post_elasticity</span><span class="p">[</span><span class="n">other_firm</span><span class="p">,</span><span class="n">firm</span><span class="p">]</span><span class="o">*</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">other_firm</span><span class="p">]</span><span class="o">*</span><span class="n">post_margin</span><span class="p">[</span><span class="n">other_firm</span><span class="p">]</span> <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">)))</span>
        <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
            <span class="n">equations</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">firm</span><span class="o">==</span><span class="n">other_firm</span><span class="p">)</span> <span class="o">+</span> <span class="n">b</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span><span class="n">other_firm</span><span class="p">]</span><span class="o">/</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span><span class="o">+</span><span class="n">post_marketshare</span><span class="p">[</span><span class="n">other_firm</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">market_elasticity</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">equations</span>
</pre></div>
</div>
<p>As the solver works with a vector <span class="math notranslate nohighlight">\(x\)</span> for the values (not a
collection of dictionaries), we define a wrapper function which turns
<span class="math notranslate nohighlight">\(x\)</span> to the values in the dictionaries. Once we have the solution
<span class="math notranslate nohighlight">\(x\)</span> we ‘unwrap’ it into values for our dictionaries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">wrapper_function</span><span class="p">(</span><span class="n">x</span><span class="p">):</span> <span class="c1"># the solver used below needs a vector x as input, not a collection of dictionaries</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="p">[</span><span class="n">post_marketshare</span><span class="p">,</span><span class="n">post_margin</span><span class="p">,</span><span class="n">price_change</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">firms</span><span class="p">):</span>
            <span class="nb">dict</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
            <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nonmerging_firms</span><span class="p">):</span>
        <span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
        <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
            <span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">other_firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
            <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="n">vector_function</span><span class="p">(</span><span class="n">post_marketshare</span><span class="p">,</span><span class="n">post_elasticity</span><span class="p">,</span><span class="n">post_margin</span><span class="p">,</span><span class="n">price_change</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">unwrap</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>   <span class="c1"># once we have the equilibrium solution as a vector x, we go back to dictionaries</span>
    <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># as they are easier to work with</span>
    <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="p">[</span><span class="n">post_marketshare</span><span class="p">,</span><span class="n">post_margin</span><span class="p">,</span><span class="n">price_change</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">firms</span><span class="p">):</span>
            <span class="nb">dict</span><span class="p">[</span><span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
            <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nonmerging_firms</span><span class="p">):</span>
        <span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
        <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
            <span class="n">post_elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">other_firm</span><span class="p">]</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
            <span class="n">counter</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">post_marketshare</span><span class="p">,</span><span class="n">post_elasticity</span><span class="p">,</span><span class="n">post_margin</span><span class="p">,</span><span class="n">price_change</span><span class="p">]</span>
</pre></div>
</div>
<p>The solver needs an initial guess for the post merger solution; we use
the pre-merger values as initial guess.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">initial_value</span><span class="p">():</span> <span class="c1"># initial value based on before merger values</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="nb">dict</span> <span class="ow">in</span> <span class="p">[</span><span class="n">market_share</span><span class="p">,</span><span class="n">margin</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">firms</span><span class="p">):</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">dict</span><span class="p">[</span><span class="n">firm</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">firms</span><span class="p">):</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span> <span class="c1"># price change</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">nonmerging_firms</span><span class="p">):</span>
        <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">firm</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">other_firm</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">merging_firms</span><span class="p">):</span>
            <span class="n">x</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">elasticity</span><span class="p">[</span><span class="n">firm</span><span class="p">,</span> <span class="n">other_firm</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">x</span>
</pre></div>
</div>
<p>We use the <code class="docutils literal notranslate"><span class="pre">fsolve</span></code> routine to find the values where
<code class="docutils literal notranslate"><span class="pre">vector_function</span></code> equals 0 (where all equations hold). We solve this
“via” <code class="docutils literal notranslate"><span class="pre">wrapper_function</span></code> as <code class="docutils literal notranslate"><span class="pre">fsolve</span></code> expects a vector <span class="math notranslate nohighlight">\(x\)</span> as
input, not a list of dictionaries. We print the relevant post merger
values in a table.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">after_merger_values</span><span class="p">():</span>
    <span class="n">outcome</span> <span class="o">=</span> <span class="n">unwrap</span><span class="p">(</span><span class="n">optimize</span><span class="o">.</span><span class="n">fsolve</span><span class="p">(</span><span class="n">wrapper_function</span><span class="p">,</span> <span class="n">initial_value</span><span class="p">()))</span>
    <span class="n">table</span> <span class="o">=</span> <span class="n">ListTable</span><span class="p">()</span>
    <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="s1">&#39;firm&#39;</span><span class="p">,</span> <span class="s1">&#39;marketshare&#39;</span><span class="p">,</span><span class="s1">&#39;margin&#39;</span><span class="p">,</span><span class="s1">&#39;price increase&#39;</span><span class="p">])</span>
    <span class="k">for</span> <span class="n">firm</span> <span class="ow">in</span> <span class="n">firms</span><span class="p">:</span>
        <span class="n">table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">firm</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">outcome</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">firm</span><span class="p">],</span><span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">outcome</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">firm</span><span class="p">],</span><span class="s2">&quot;</span><span class="si">%0.3f</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">outcome</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="n">firm</span><span class="p">]])</span>
    <span class="k">print</span> <span class="s2">&quot;table of post merger outcomes:&quot;</span>
    <span class="k">return</span> <span class="n">table</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">after_merger_values</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">table</span> <span class="n">of</span> <span class="n">post</span> <span class="n">merger</span> <span class="n">outcomes</span><span class="p">:</span>
</pre></div>
</div>
<table><tr><td>firm</td><td>marketshare</td><td>margin</td><td>price increase</td></tr><tr><td>firm1</td><td>0.174</td><td>0.414</td><td>0.138</td></tr><tr><td>firm2</td><td>0.281</td><td>0.425</td><td>0.108</td></tr><tr><td>firm3</td><td>0.546</td><td>0.466</td><td>0.041</td></tr></table><p>As one would expect, a merger between firms producing substitutes with
no efficiency gains leads to higher prices for all firms. The market
share of the firm that does not merge (firm3) increases due to the
merger as prices increase more for the merging firms.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Competition Policy and Regulation</a></h1>








<h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Python.html">Python introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Article101.html">Article 101</a></li>
<li class="toctree-l1"><a class="reference internal" href="../VerticalRestraints.html">Vertical restraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Article102Part1.html">Article 102: Part 1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Article102Part2.html">Article 102: Part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Mergers.html">Mergers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IPandInnovation.html">Innovation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Regulation.html">Regulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HealthCare.html">Competition policy in health care</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Article101and102LectureNotes.html">Competition Policy Lectures Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LectureNotes_Mergers.html">Mergers and Acquisitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Regulation_Innovation_Lecture_Notes.html">Innovation and Regulation Lecture Notes</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Introduction_to_Python/Introduction_to_Python.html">Python: introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Collusion_Cournot/Collusion_Cournot.html">Python: collusion with Cournot competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Collusion_Bertrand/Collusion_Bertrand.html">Python: collusion with Bertrand competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HartTirole/HartTirole.html">Python: intrabrand competition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pricediscrimination/pricediscrimination.html">Python: price discrimination</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Python: merger simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Innovation/Innovation.html">Python: innovation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Regulation/Regulation.html">Python: regulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Healthcare/Healthcare.html">Python: risk adjustment</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../pricediscrimination/pricediscrimination.html" title="previous chapter">Python: price discrimination</a></li>
      <li>Next: <a href="../Innovation/Innovation.html" title="next chapter">Python: innovation</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Jan Boone.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/Mergers/Mergers.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>